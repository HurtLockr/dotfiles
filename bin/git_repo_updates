#!/bin/bash

cd ~/packages
for package in ./*; do
    cd $package
    if test="$(git status | grep 'Your branch is behind')"
    then
        stat=$(echo $test | awk '{print $7" "substr($8,0,length($8)-1)" behind"}')
    else
        stat="Up to date"
    fi
    pack=$(git remote show origin | grep "Fetch" | awk -F "/" '{print $(NF-1)"/"substr($NF, 0, length($NF)-4)}')
    echo "$pack: $stat"
    cd ..
done
